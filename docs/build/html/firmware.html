

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Firmware Documentation &mdash; x96_board 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'0.1',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Driver Documentation" href="driver.html" />
    <link rel="prev" title="Board Documentation" href="board.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> x96_board
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="board.html">Board Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Firmware Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#coding-guidelines">Coding Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#principles-for-development">Principles for development</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unit-testing-guide">Unit Testing Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workflow">Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bug-report">Bug report</a></li>
<li class="toctree-l3"><a class="reference internal" href="#communication-channel">Communication Channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#flow-diagram-of-fw">Flow Diagram of FW</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="driver.html">Driver Documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">x96_board</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Firmware Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/firmware.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="firmware-documentation">
<span id="firmware"></span><h1>Firmware Documentation<a class="headerlink" href="#firmware-documentation" title="Permalink to this headline">¶</a></h1>
<p>The firmware is developed in the Integrated Design Environment (IDE) of PSoC device, PSoC Creator 4.4.</p>
<div class="section" id="coding-guidelines">
<h2>Coding Guidelines<a class="headerlink" href="#coding-guidelines" title="Permalink to this headline">¶</a></h2>
<p>This document explains how to participate in project conversations, log bugs and enhancement requests, and submit changes to the project so your patch will be accepted quickly in the codebase. All contributors need to follow certain set of rules while working on this project.
As a contributor, you’ll want to be familiar with the x96_Board project, how to configure, install, and use it.</p>
<div class="section" id="principles-for-development">
<h3>Principles for development<a class="headerlink" href="#principles-for-development" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="unit-testing-guide">
<h3>Unit Testing Guide<a class="headerlink" href="#unit-testing-guide" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="workflow">
<h3>Workflow<a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="bug-report">
<h3>Bug report<a class="headerlink" href="#bug-report" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="communication-channel">
<h3>Communication Channel<a class="headerlink" href="#communication-channel" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="flow-diagram-of-fw">
<h2>Flow Diagram of FW<a class="headerlink" href="#flow-diagram-of-fw" title="Permalink to this headline">¶</a></h2>
<p>The complete firmware is divided in 9 different .c files. <a class="reference internal" href="#fw-main-diagram"><span class="std std-numref">Fig. 7</span></a> shows the color block of the 9 different files and the flow diagram of the main program, which is located in main.c file.</p>
<div class="figure align-center" id="id1">
<span id="fw-main-diagram"></span><img alt="_images/FW_x96-fw_main_diagram.png" src="_images/FW_x96-fw_main_diagram.png" />
<p class="caption"><span class="caption-number">Fig. 7 </span><span class="caption-text">FW main diagram</span></p>
</div>
<p>The main program starts with the initialization function and then enter to an infinite for-loop in “standby mode”. During this mode the firmware polls the USB communication to detect any message. <a class="reference internal" href="#fw-init-diagram"><span class="std std-numref">Fig. 8</span></a> illustrates the 8 steps to initialize the board and the DUTs.</p>
<div class="figure align-left" id="id2">
<span id="fw-init-diagram"></span><img alt="Left floating image" src="_images/FW_x96-fw_x96_init.png" />
<p class="caption"><span class="caption-number">Fig. 8 </span><span class="caption-text">Initialization diagram</span></p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">1. Start MGSs supply with 3.3v by default</div>
</div>
<div class="line-block">
<div class="line">2. Init SPIM for the multiplexer module</div>
</div>
<div class="line-block">
<div class="line">3. Init I2x6 communication</div>
</div>
<div class="line-block">
<div class="line">4. Start USB UART communication</div>
</div>
<div class="line-block">
<div class="line">5. Detect the MGS devices physically connected</div>
</div>
<div class="line-block">
<div class="line">6. Detect the SHT25 devices physically connected</div>
</div>
<div class="line-block">
<div class="line">7. Detect the DPS310 devices physically connected</div>
</div>
<div class="line-block">
<div class="line">8. Setup the interruptions</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>All the mensages detected by the ‘mgs_USB’ module, the mensages that are sent from PSoC and the interpretation of these messages are handled with ‘CommHandler’ module, including the function ‘CommRX’ called in main function (<a class="reference internal" href="#fw-main-diagram"><span class="std std-numref">Fig. 7</span></a>). (<code class="xref std std-numref docutils literal notranslate"><span class="pre">Fig.</span> <span class="pre">%s</span></code>) shows ‘CommRX’ function.</p>
<div class="figure align-center" id="id3">
<span id="fw-commrx-diagram"></span><img alt="_images/FW_x96-CommRX_diagram.png" src="_images/FW_x96-CommRX_diagram.png" />
<p class="caption"><span class="caption-number">Fig. 9 </span><span class="caption-text">CommRX Function</span></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="driver.html" class="btn btn-neutral float-right" title="Driver Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="board.html" class="btn btn-neutral float-left" title="Board Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Niels Prieto Bejar.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>